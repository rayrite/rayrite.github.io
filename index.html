<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Taylor Family Values 2024 Music Challenge</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
    }
    .container {
        text-align: center;
        margin-top: 20px;
        position: relative;
    }
    h1 {
        font-size: 24px;
        color: #333;
        text-align: left;
        position: fixed;
        width: 100%;
        top: 0;
        left: 0;
        background: white;
        padding: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .round-box {
        background-color: lightblue;
        border-radius: 0px;
        padding: 5px;
        margin: 50px 5px 5px; /* Adjust margin to leave space for fixed header */
        position: relative;
    }
    .round-label {
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: burgundy;
        color: #800020;
        padding: 5px 10px;
        border-radius: 10px;
        font-size: 24px;
    }
    .round-score {
        position: absolute;
        top: 5px;
        left: 5px;
        font-size: 40px;
        font-weight: bold;
        color: #311B92;
    }
    .list-container {
        display: flex;
        justify-content: space-between;
        margin: 0;
    }
    .list {
        width: 50%;
        background: #f4f4f4;
        border-radius: 0px;
        padding: 0;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
        font-size: 20px;
        color: #555;
        margin: 10px 0;
        padding: 10px;
        background-color: #e0e0e0;
    }
    ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    li {
        display: flex;
        align-items: center;
        padding: 1px 2px;
        border-bottom: 1px solid #ddd;
        counter-increment: item;
    }
    li:before {
        content: counter(item) ".";
        margin-right: 1px;
        font-weight: bold;
    }
    li:last-child {
        border-bottom: none;
    }
    textarea {
        flex: 1;
        padding: 1px;
        border: 1px solid #ccc;
        border-radius: 5px;
        resize: vertical;
    }
    .check-button {
        margin-right: 5px;
        padding: 8px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }
    .check-button.red {
        background-color: red;
        color: white;
    }
    .check-button.green {
        background-color: green;
        color: white;
    }
</style>
</head>
<body>
    <div class="container">
        <h1>Taylor Family Values 2024 Music Challenge</h1>
        <div id="rounds-container"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const roundsContainer = document.getElementById('rounds-container');
            
            for (let round = 1; round <= 10; round++) {
                const roundBox = document.createElement('div');
                roundBox.className = 'round-box';
                roundBox.setAttribute('data-round', round);

                const roundLabel = document.createElement('div');
                roundLabel.className = 'round-label';
                roundLabel.innerText = `Round ${round}`;
                roundBox.appendChild(roundLabel);

                const roundScore = document.createElement('div');
                roundScore.className = 'round-score';
                roundScore.id = `score-${round}`;
                roundScore.innerText = '00';
                roundBox.appendChild(roundScore);

                const listContainer = document.createElement('div');
                listContainer.className = 'list-container';

                const currentList = createList('Current', 1, round);
                const originalList = createList('Original', 2, round);

                listContainer.appendChild(currentList);
                listContainer.appendChild(originalList);

                roundBox.appendChild(listContainer);
                roundsContainer.appendChild(roundBox);

                updateScore(round);
            }

            function createList(title, points, round) {
                const list = document.createElement('div');
                list.className = 'list';

                const heading = document.createElement('h2');
                heading.innerText = `${title} (Artist - Song Title) ${points} pt${points > 1 ? 's' : ''}`;
                list.appendChild(heading);

                const ul = document.createElement('ul');

                for (let i = 1; i <= 10; i++) {
                    const li = document.createElement('li');

                    const button = document.createElement('button');
                    button.className = 'check-button red';
                    button.setAttribute('data-points', points);
                    button.addEventListener('click', function() {
                        toggleCheck(button, round);
                    });
                    li.appendChild(button);

                    const textarea = document.createElement('textarea');
                    textarea.id = `${title.toLowerCase()}-${round}-${i}`;
                    textarea.rows = 2;
                    textarea.addEventListener('input', function() {
                        localStorage.setItem(textarea.id, textarea.value);
                    });
                    li.appendChild(textarea);

                    ul.appendChild(li);

                    // Load saved state
                    const savedText = localStorage.getItem(textarea.id);
                    if (savedText) {
                        textarea.value = savedText;
                    }
                    const savedButtonState = localStorage.getItem(`button-${round}-${title.toLowerCase()}-${i}`);
                    if (savedButtonState === 'green') {
                        button.classList.remove('red');
                        button.classList.add('green');
                    }
                }
                list.appendChild(ul);
                return list;
            }

            function updateScore(round) {
                let roundScore = 0;
                document.querySelectorAll(`.round-box[data-round="${round}"] .check-button`).forEach(button => {
                    if (button.classList.contains('green')) {
                        roundScore += parseInt(button.getAttribute('data-points'));
                    }
                });
                document.getElementById(`score-${round}`).innerText = roundScore.toString().padStart(2, '0');
            }

            function toggleCheck(button, round) {
                if (button.classList.contains('red')) {
                    button.classList.remove('red');
                    button.classList.add('green');
                } else {
                    button.classList.remove('green');
                    button.classList.add('red');
                }
                saveButtonState(button, round);
                updateScore(round);
            }

            function saveButtonState(button, round) {
                const listType = button.nextElementSibling.id.split('-')[0];
                const index = button.nextElementSibling.id.split('-')[2];
                localStorage.setItem(`button-${round}-${listType}-${index}`, button.classList.contains('green') ? 'green' : 'red');
            }
        });
    </script>
</body>
</html>
